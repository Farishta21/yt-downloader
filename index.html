<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WALK-DRONE YT DOWNLOADER</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:white;
}
header{
  padding:30px;
  text-align:center;
  background:linear-gradient(135deg,#1e3a8a,#7c3aed);
  color:#facc15;
  font-weight:bold;
}
.container{
  max-width:700px;
  margin:40px auto;
  padding:20px;
}
.card{
  background:#111827;
  border-radius:18px;
  padding:25px;
  box-shadow:0 0 25px rgba(34,211,238,.4);
}
input{
  width:100%;
  padding:15px;
  border-radius:12px;
  border:none;
  margin-bottom:15px;
  background:#020617;
  color:white;
}
button{
  width:100%;
  padding:15px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  background:#22d3ee;
  color:black;
  font-weight:bold;
}
button:hover{opacity:.9}
.loading{
  display:none;
  text-align:center;
  margin-top:15px;
}
.result,.error{
  display:none;
  margin-top:20px;
  padding:15px;
  border-radius:12px;
}
.result{
  background:#022c22;
  border-left:5px solid #10b981;
}
.error{
  background:#3f1d1d;
  border-left:5px solid #f87171;
}
a.download{
  display:inline-block;
  margin-top:10px;
  padding:12px 20px;
  background:#10b981;
  color:black;
  border-radius:10px;
  text-decoration:none;
  font-weight:bold;
}
footer{
  text-align:center;
  margin-top:40px;
  color:#9ca3af;
}
</style>
</head>

<body>

<header>WALK-DRONE YOUTUBE DOWNLOADER</header>

<div class="container">
  <div class="card">
    <h2>Paste YouTube Link</h2>

    <input id="ytUrl" placeholder="https://youtu.be/xxxx">

    <button id="fetchBtn">GENERATE DOWNLOAD</button>

    <div class="loading" id="loading">⏳ Processing…</div>

    <div class="result" id="result">
      <strong id="videoTitle">Video Ready</strong><br>
      <a id="downloadLink" class="download" target="_blank">DOWNLOAD VIDEO</a>
    </div>

    <div class="error" id="error"></div>
  </div>
</div>

<footer>© 2026 WALK-DRONE</footer>

<script>
const btn = document.getElementById("fetchBtn");
const input = document.getElementById("ytUrl");
const loading = document.getElementById("loading");
const result = document.getElementById("result");
const errorBox = document.getElementById("error");
const title = document.getElementById("videoTitle");
const link = document.getElementById("downloadLink");

function resetUI(){
  loading.style.display="none";
  result.style.display="none";
  errorBox.style.display="none";
}

btn.onclick = async () => {
  const url = input.value.trim();
  if(!url){
    errorBox.innerText="Please enter YouTube URL";
    errorBox.style.display="block";
    return;
  }

  resetUI();
  loading.style.display="block";

  try{
    const res = await fetch(`/api/yt?url=${encodeURIComponent(url)}`);
    const data = await res.json();

    if(data.download){
      title.innerText = data.title || "Video Ready";
      link.href = data.download;
      result.style.display="block";
    }else{
      throw "Download link not found";
    }
  }catch(e){
    errorBox.innerText="Failed to fetch video";
    errorBox.style.display="block";
  }finally{
    loading.style.display="none";
  }
};
</script>

</body>
</html>